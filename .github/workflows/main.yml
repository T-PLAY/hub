
name: Main Workflow

defaults:
  run:
    shell: bash

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

jobs:
  all:
    runs-on: ${{ matrix.config.os }}
    strategy:
      fail-fast: false
      matrix:
        config:
          - { name: "Windows MSVC", os: windows-latest, cc: "cl.exe", cxx: "cl.exe", icon: "Windows"}
          - { name: "Ubuntu gcc", os: ubuntu-latest, cc: "gcc", cxx: "g++", icon: "Linux" }
          - { name: "MacOS clang", os: macos-latest, cc: "clang", cxx: "clang++", icon: "Apple" }

    - uses: actions/checkout@v4
    # steps:

    - name: Build and install
        # uses: ./.github/actions/buildAndInstall
      uses: ./.github/workflows/buildAndTest.yml
        # with:
          # matrix: ${{ matrix }}
    - name: Build and Install
      run: echo "Build and Install"
      # with:
        # matrix: ${{ matrix }}
        # version: ${{ matrix.config }}
